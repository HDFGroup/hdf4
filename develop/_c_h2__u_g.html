<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HDF: HDF Fundamentals</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="hdf4doxy.css" rel="stylesheet" type="text/css">
<!-- <link href="hdf4doxy.css" rel="stylesheet" type="text/css"/>
 -->
<script type="text/javascript" src="hdf4_navtree_hacks.js"></script>
</head>
<body>
<div style="background:#FFDDDD;font-size:120%;text-align:center;margin:0;padding:5px">Please, help us to better serve our user community by answering the following short survey:  <a href="https://www.hdfgroup.org/website-survey/">https://www.hdfgroup.org/website-survey/</a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="HDFG-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="https://www.hdfgroup.org">HDF</a>
   &#160;<span id="projectnumber">4.3.0-1</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_c_h2__u_g.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">HDF Fundamentals</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Navigate back: <a class="el" href="index.html">Contents</a> / <a class="el" href="_u_g.html">HDF User Guide</a> </p><hr  />
<h1><a class="anchor" id="sec_fund"></a>
HDF Fundamentals</h1>
<h2><a class="anchor" id="subsec_fund_overview"></a>
Chapter Overview</h2>
<p>This chapter provides necessary information for the creation and manipulation of HDF files. It includes an overview of the HDF file format, basic operations on HDF files, and programming language issues pertaining to the use of Fortran and ANSI C in HDF programming.</p>
<h2><a class="anchor" id="subsec_fund_format"></a>
HDF File Format</h2>
<p>An HDF file contains a file header, at least one data descriptor block, and zero or more data elements as depicted in Figure 2a.</p>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
The Physical Layout of an HDF File Containing One Data Object</div></div>
   </td></tr>
</table>
<p>The file header identifies the file as an HDF file. A data descriptor block contains a number of data descriptors. A data descriptor and a data element together form a data object, which is the basic conglomerate structure for encapsulating data in the HDF file. Each of these terms is described in the following sections.</p>
<h3><a class="anchor" id="subsubsec_fund_format_head"></a>
File Header</h3>
<p>The first component of an HDF file is the file header, which takes up the first four bytes of the HDF file. Specifically, it consists of four one-byte values that are ASCII representations of control characters: the first is a control-N, the second is a control-C , the third is a control-S and the fourth is a control-A (^N^C^S^A).</p>
<p>Note that, on some machines, the order of bytes in the file header might be swapped when the header is written to an HDF file, causing these characters to be written in little-endian order. To maintain the portability of HDF file header data when developing software for such machines, this byte swapping must be counteracted by ensuring the characters are read and written in the desired order.</p>
<h3><a class="anchor" id="subsubsec_fund_format_object"></a>
Data Object</h3>
<p>A data object is comprised of a data descriptor and a data element. The data descriptor consists of information about the type, location, and size of the data element. The data element contains the actual data. This organization of HDF data makes HDF files self-describing. Figure 2b shows two examples of data objects.</p>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Two Data Objects</div></div>
   </td></tr>
</table>
<h4>Data Descriptor</h4>
<p>All data descriptors are twelve bytes long and contain four fields, as depicted in Figure 2c. These fields are: a 16-bit tag, a 16-bit reference number, a 32-bit data offset and a 32-bit data length.</p>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
The Contents of a Data Descriptor</div></div>
   </td></tr>
</table>
<h4>Tag</h4>
<p>A tag is the data descriptor field that identifies the type of data stored in the corresponding data element. A tag is a 16-bit unsigned integer between 1 and 65,535, and is associated with a mnemonic name to promote ease to use and the readability of user programs.</p>
<p>If a data descriptor has no corresponding data element, the value of its tag is DFTAG_NULL (or 0).</p>
<p>Tags are assigned by The HDF Group as part of the HDF specification. The following are the ranges of tag values and their descriptions: </p><ul>
<li>1 to 32,767 - Tags reserved for HDF Group use </li>
<li>32,768 to 64,999 - User-definable tags </li>
<li>65,000 to 65,535 - Tags reserved for expansion of the HDF specification</li>
</ul>
<p>A list of commonly-used tags and their descriptions is included in <a class="el" href="_a_p_p_e_n_d__u_g.html#sec_appenda">Reserved HDF Tags</a> of this document.</p>
<h4>Reference Number</h4>
<p>For each occurrence of a tag in an HDF file, a unique reference number is assigned by the library with the tag in the data descriptor. A reference number is a 16-bit unsigned integer and can not be changed during the life of the data object that the reference number specifies.</p>
<p>The combination of a tag and a reference number uniquely identifies the corresponding data object in the file.</p>
<p>Reference numbers are not necessarily assigned consecutively, so it cannot be assumed that the value of a reference number has any meaning beyond providing a way of distinguishing among objects with the same tag. While application programmers may find it convenient to impart some additional meaning to reference numbers in their code, it is emphasized that the HDF library will not internally recognize any such meaning.</p>
<h4>Data Offset and Length</h4>
<p>The data offset field points to the location of the data element in the file by storing the number of bytes from the beginning of the file to the beginning of the data element. The length field contains the size of the data element in bytes. The data offset and the length are both 32-bit signed integers. This results in a file-size limit of 2 gigabytes.</p>
<h4>Data Elements</h4>
<p>The data element is the raw data portion of a data object.</p>
<h3><a class="anchor" id="subsubsec_fund_format_descrip"></a>
Data Descriptor Block</h3>
<p>Data descriptors are physically stored in a linked list of blocks called data descriptor blocks. The relationship between the data descriptor block to the other components of an HDF file is illustrated in Figure 2a on page 7. The individual components of a data descriptor block are depicted in Figure 2d on page 10. Each data descriptor in a data descriptor block is assumed to be associated with a data element unless it contains the tag DFTAG_NULL (or 0),which indicates that there is no associated data element. By default, a data descriptor block contains 16 (defined as DEF_NDDS) data descriptors. The user may reset this limit when creating the HDF file. Refer to Section 2.3.2 on page 11 for more details.</p>
<p>In addition to data descriptors, each data descriptor block contains a data descriptor header. The data descriptor header contains two fields: block size and next block. The block size field is a 16- bit unsigned integer indicating the number of data descriptors in the data descriptor block. The next block field is a 32-bit unsigned integer indicating the offset of the next data descriptor block, if one exists. The last data descriptor header in the list contains a value of 0 in its next block field.</p>
<p>Figure 2d illustrates the layout of a data descriptor block.</p>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Data Descriptor Block</div></div>
   </td></tr>
</table>
<h3><a class="anchor" id="subsubsec_fund_format_group"></a>
Grouping Data Objects in an HDF File</h3>
<p>Data objects containing related data in HDF files are usually grouped together by the library. These groups of data objects are called data sets. The HDF user uses the application interface to manipulate data sets in a file. As an example, an 8-bit raster image data set requires three objects: a group object identifying the members of the set, an image object containing the image data, and a dimension object indicating the size of the image.</p>
<p>Data objects are individually accessible even if they are included in a set, therefore data objects can belong to more than one set and sets can be included in larger groups. For example, a palette object included in one raster image set may also be a part of another raster image set if its tag and reference number are included in a data descriptor within that second set.</p>
<p>Additional information about data objects, including the options available for storing them, can be found in the <a href="http://www.hdfgroup.org/doc.html">HDF Specifications and Developer’s Guide</a> from the HDF web site.</p>
<h2><a class="anchor" id="subsec_fund_basic"></a>
Basic Operations on HDF Files Using the Multifile Interfaces</h2>
<p>This section describes the basic file operations, some of which are required in working with HDF files using the multifile interfaces. Except for the SD interface, all applications using other multifile interfaces must explicitly use the routines Hopen and Hclose to control accesses to the HDF files. In an application using the HDF file format, the file is accessed via its identifier, referred to as file identifier. The following subsections describe the file identifier and the basic file operations common to most multifile interfaces.</p>
<h3><a class="anchor" id="subsubsec_fund_basic_file"></a>
File Identifiers</h3>
<p>The HDF programming model specifies that a data file is first explicitly created or opened by an application, manipulated, then explicitly closed by the application. A file identifier is a unique number that the HDF library assigns to an HDF file when creating or opening the file. The HDF library creates the file identifier for an HDF file when given its file name, as represented in the native file system. Interface routines use only the file identifier to access and manipulate the file. When all operations on the file are complete, the file identifier must be discarded by explicitly closing the file before terminating the application.</p>
<p>As every file is assigned its own identifier, the order in which files are accessed is very flexible. For example, it is valid to open a file and obtain an identifier for it, then open a second file without closing the first file or disposing of the first file identifier. The only requirement made by HDF is that all file identifiers be individually discarded before the termination of the calling program.</p>
<p>File identifiers created by the routine of one HDF interface can be used by the routines of any other interfaces, except SD’s.</p>
<h3><a class="anchor" id="subsubsec_fund_basic_open"></a>
Opening HDF Files: Hopen</h3>
<table class="doxtable">
<tr>
<th><b>C</b> </th><td>file_id = Hopen(filename, access_mode, num_dds_block);   </td></tr>
<tr>
<th><b>FORTRAN</b> </th><td>file_id = hopen(filename, access_mode, num_dds_block)   </td></tr>
</table>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Hopen Parameter List</div></div>
   </td></tr>
</table>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
File Access Code Flags</div></div>
   </td></tr>
</table>
<h3><a class="anchor" id="subsubsec_fund_basic_close"></a>
Closing HDF Files: Hclose</h3>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Hclose Parameter List</div></div>
   </td></tr>
</table>
<h3><a class="anchor" id="subsubsec_fund_basic_get"></a>
Getting the HDF Library and File Versions: Hgetlibversion and Hgetfileversion</h3>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Hgetlibversion and Hgetfileversion Parameter Lists</div></div>
   </td></tr>
</table>
<h2><a class="anchor" id="subsec_fund_file"></a>
Determining whether a File Is an HDF File: Hishdf/hishdff</h2>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Hishdf/hishdff Parameter List</div></div>
   </td></tr>
</table>
<h2><a class="anchor" id="subsec_fund_prog"></a>
Programming Issues</h2>
<h3><a class="anchor" id="subsubsec_fund_prog_head"></a>
Header File Information</h3>
<h3><a class="anchor" id="subsubsec_fund_prog_defs"></a>
HDF Definitions</h3>
<p>The HDF library provides several sets of definitions which can be used easily in the user applications. These sets include the definitions of the data types, the data type flags, and the limits that set various maximum values. The definitions of the data types supported by HDF are located in the <a class="el" href="hdf_8h.html">hdf.h</a> header file, and the data type flags are located in the <a class="el" href="hntdefs_8h.html">hntdefs.h</a> header file. Both are also included in (See Table 2F on page 14), (See Table 2G on page 15), and (See Table 2H on page 15). HDF data types are used for portability in the declaration of variables, and data type flags are used as parameters in various HDF interface routines.</p>
<h4>Standard HDF Data Types</h4>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Standard HDF Data Types and Flags</div></div>
   </td></tr>
</table>
<h4>Native Format Data Types</h4>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Native Format Data Type Definitions</div></div>
   </td></tr>
</table>
<h4>Little-Endian Data Types</h4>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Little-Endian Format Data Type Definitions</div></div>
   </td></tr>
</table>
<h4>Tag Definitions</h4>
<h4>Limit Definitions</h4>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Limit Definitions</div></div>
   </td></tr>
</table>
<h3><a class="anchor" id="subsubsec_fund_prog_lang"></a>
FORTRAN-77 and C Language Issues</h3>
<p>HDF provides both FORTRAN-77 and C versions of most of its interface routines. In order to make the FORTRAN-77 and C versions of each routine as similar as possible, some compromises have been made in the process of simplifying the interface for both programming languages.</p>
<h4>FORTRAN-77-to-C Translation</h4>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Use of a Function Call Converter to Route FORTRAN-77 HDF Calls to the C Library</div></div>
   </td></tr>
</table>
<h4>Case Sensitivity</h4>
<h4>Name Length</h4>
<h4>Header Files</h4>
<h4>Data Type Specifications</h4>
<table class="doxtable">
<tr>
<td><div class="image">
<img src=".gif" alt=""/>
<div class="caption">
Correspondence Between Fortran and HDF C Data Types</div></div>
   </td></tr>
</table>
<h4>String and Array Specifications</h4>
<h4>FORTRAN-77 and ANSI C</h4>
<hr  />
<p> Navigate back: <a class="el" href="index.html">Contents</a> / <a class="el" href="_u_g.html">HDF User Guide</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
