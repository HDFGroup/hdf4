# ****************************************************************************
# * NCSA HDF                                                                 *
# * Software Development Group                                               *
# * National Center for Supercomputing Applications                          *
# * University of Illinois at Urbana-Champaign                               *
# * 605 E. Springfield, Champaign IL 61820                                   *
# *                                                                          *
# * For conditions of distribution and use, see the accompanying             *
# * hdf/COPYING file.                                                        *
# *                                                                          *
# ***************************************************************************
#
# $Id$
#
#
UTILS = hdf24to8.exe hdfcomp.exe hdfls.exe hdfpack.exe hdfrseq.exe hdftopal.exe \
    hdftor8.exe paltohdf.exe r8tohdf.exe ristosds.exe vcompat.exe vmake.exe \
    vshow.exe make24.exe hdf2jpeg.exe jpeg2hdf.exe

HEOBJ = he_main.obj he_cntrl.obj he_disp.obj he_file.obj

#
# These values will typically be over ridden by values specified in
#   top level HDF 
#

# ==> Uncomment the line with your system type on it.
#MACHINE = SUN
#MACHINE = UNICOS
#MACHINE = IRIS4
#MACHINE = APOLLO
#MACHINE = IBM6000
#MACHINE = CONVEX
#MACHINE = VMS
#MACHINE = MIPSEL
#MACHINE = MAC
MACHINE = PC
#MACHINE = HP9000

RM=del
RMFLAGS=

HDFLIB = ../lib
HDFINC = ../include
HDFBIN = ../bin

IFLAGS=   /I../include /I.
LIBS= ..\lib\df.lib

CC=cl
#CFLAGS=  /c /D$(MACHINE) /Gt512 /AH /W4 /Od $(IFLAGS) /Zi
#CFLAGS=  /c /D$(MACHINE) /AH /W4 /Od $(IFLAGS) /Zi
CFLAGS=  /c /D$(MACHINE) /Gt32 /AH /W4 /Od $(IFLAGS) /Zi /Gs /FPi87
#CFLAGS=  /c /D$(MACHINE) /Gt512 /AH /W4 /Ox $(IFLAGS)

LN=link
LNFLAGS=/COD /ST:6118

# ==> For IRIS4, specify CFLAGS as follows:
#CFLAGS=  -g -D$(MACHINE) -ansi

.c.obj:
    $(CC) $(CFLAGS) $<

all: hdfed.exe utils
    mkdir $(HDFBIN)
    cp *.exe $(HDFBIN)

nofortran: all

hdfed.exe: he.h he_proto.h $(HEOBJ)
    $(LN) $(LNFLAGS) $(HEOBJ),$*,nul,$(LIBS);

hdf24to8.exe : hdf24to8.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

hdfcomp.exe : hdfcomp.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

hdfpack.exe : hdfpack.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

hdftopal.exe : hdftopal.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

hdftor8.exe : hdftor8.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

paltohdf.exe : paltohdf.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

r8tohdf.exe : r8tohdf.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

make24.exe : make24.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

hdf2jpeg.exe : hdf2jpeg.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

jpeg2hdf.exe : jpeg2hdf.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

ristosds.exe : ristosds.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

vcompat.exe : vcompat.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

vmake.exe : vmake.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

vshow.exe : vshow.obj
    $(LN) $(LNFLAGS) $*,$*,nul,$(LIBS);

utils: $(UTILS)

clean:
    -$(RM) $(RMFLAGS) *.obj $(UTILS) hdfed.exe

